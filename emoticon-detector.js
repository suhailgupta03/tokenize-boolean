module.exports = class Moji {

    
    static EMOTICONS() {
        return {
            happy: [
                ':‑)',
                ':-]',
                ':-3',
                ':->',
                '8-)',
                ':-}',
                ':o)',
                ':c)',
                ':^)',
                '=]',
                '=)',
                ':)',
                ':]',
                ':3',
                ':>',
                '8)',
                ':}',
                '(●＾o＾●)',
                '(＾ｖ＾)',
                '(＾ｕ＾)',
                '(＾◇＾)',
                '( ^)o(^ )',
                '(^O^)',
                '(^o^)',
                '(^○^)', ')^o^( (*^▽^*)',
                '(✿◠‿◠)',
                'オーホッホ'
            ],
            angry: [
                '(＃ﾟДﾟ)',
                '（ ´Д｀）'
            ],
            smirk: [
                '( ͡° ͜ʖ ͡°)'
            ],
            cheer: [
                '\o/'
            ],
            fishy: [
                '><>',
                '<*)))‑{',
                '><(((*>',
                '>°)))彡',
                '(Q))',
                '><ヨヨ (°))<<',
                '>°))))彡',
                '<°)))彡',
                '>°))彡',
                '<+))><<',
                '<*))>=<'
            ],
            octopus: [
                '<コ:彡',
                'Ｃ:.ミ'
            ],
            snake: [
                '~>°)～～～'
            ],
            bat: [
                '～°·_·°～'
            ],
            tadpole: [
                '(°°)～'
            ],
            bomb: [
                '●～*'
            ],
            table_flip: [
                '(╯°□°）',
                '╯︵',
                '┻━┻',
                '┬──┬',
                ' ¯\_(ツ)'
            ],
            cheerleader: [
                '*\0/*'
            ],
            laughing: [
                ':‑D',
                '8‑D',
                'x‑D',
                'X‑D',
                ':D',
                '8D',
                'xD',
                'XD',
                '=D',
                '=3',
                'B^D',
                '^_^',
                '(°o°)',
                '(^_^)/',
                '(^O^)／',
                '(^o^)／',
                '(^^)/',
                '(≧∇≦)/',
                '(/◕ヮ◕)/',
                '(^o^)丿',
                '∩(·ω·)∩',
                '(·ω·)',
                '^ω^',
                '^m^',
                '>^_^<',
                '<^!^>',
                '^/^',
                '（*^_^*）',
                '§^.^§',
                '(^<^)',
                '(^.^)',
                '(^ム^)',
                '(^·^)',
                '(^.^)',
                '(^_^.)',
                '(^_^)',
                '(^^)',
                '(^J^)',
                '(*^.^*)',
                '^_^',
                '(#^.^#)',
                '（^—^）',
                '(*^^)v',
                '(^^)v',
                '(^_^)v',
                '(’-’*)',
                '(＾ｖ＾)',
                '(＾▽＾)',
                '(・∀・)',
                '(´∀`)',
                '(⌒▽⌒)',
                '(￣ー￣)',
                'm9(^Д^)'
            ],
            waving: [
                '(^^)/~~~',
                '(^_^)/~',
                '(;_;)/~~~',
                '(^.^)/~~~',
                '(-_-)/~~~',
                '($··)/~~~',
                '(@^^)/~~~',
                '(T_T)/~~~',
                '(ToT)/~~~'
            ],
            worried: [
                '(-"-)',
                '(ーー゛)',
                '(^_^メ)',
                '(-_-メ)',
                '(~_~メ)',
                '(－－〆)',
                '(・へ・)',
                '(｀´)',
                '<`～´>',
                '<`ヘ´>',
                '(ーー;)'
            ],
            eyeglasses: [
                '(^0_0^)'
            ],
            jotting_note: [
                '( ..)φ',
                'φ(..)'
            ],
            alien: [
                '(V)o￥o(V)'
            ],
            excited: [
                '＼(~o~)／',
                '＼(^o^)／',
                '＼(-o-)／',
                'ヽ(^。^)ノ',
                'ヽ(^o^)丿',
                '(*^0^*)'
            ],
            amazed: [
                '(*_*)',
                '(*_*;',
                '(+_+)',
                '(@_@)',
                '(@_@。',
                '(＠_＠;)',
                '＼(◎o◎)／！'
            ],
            respect: [
                '(__)',
                '_(._.)_',
                '_(_^_)_',
                '<(_ _)>',
                '<m(__)m>',
                'm(__)m',
                'm(_ _)m',
                '(｀-´)>'
            ],
            irritable: [
                'ヽ(`Д´)ﾉ'
            ],
            peace: [
                'ヽ(´ー｀)ﾉ'
            ],
            questioning: [
                '＼(°ロ＼)',
                '(／ロ°)／'
            ],
            double_chin: [
                ':-))'
            ],
            frown: [
                ':‑(',
                ':‑c',
                ':‑<',
                ':‑[',
                ':-||',
                '>:[',
                ':{',
                ':@',
                '>:(',
                '(´；ω；`)'
            ],
            crying: [
                ':\'‑(',
                ':\'(',
                '(\'_\')',
                '(/_;)',
                '(T_T)',
                '(;_;)',
                '(;_;',
                '(;_:)',
                '(;O;)',
                '(:_;)',
                '(ToT)',
                '(Ｔ▽Ｔ)',
                ';_;', ';-;',
                ';n;',
                ';;',
                'Q.Q',
                'T.T',
                'QQ',
                'Q_Q'
            ],
            shame: [
                '(ー_ー)!!',
                '(-.-)',
                '(-_-)',
                '(一一)',
                '(；一_一)'
            ],
            tired: [
                '(=_=)'
            ],
            cat: [
                '(=^·^=)',
                '(=^··^=)',
                '=_^='
            ],
            looking_down: [
                '(..)',
                '(._.)'
            ],
            tears_of_happiness: [
                ':\'‑)',
                ':\')',
            ],
            disgust: [
                'D‑\':',
                'D:<',
                'D:',
                'D8',
                'D;',
                'D=',
                'DX',
                'v.v'
            ],
            surprise: [
                ':‑O',
                ':O',
                ':‑o',
                ':o',
                ':-0',
                '8‑0',
                '>:O',
                'O_O',
                'o‑o',
                'O_o',
                'o_O',
                'o_o',
                'O-O',
                '(￣□￣;)',
                '°o°',
                '°O°',
                ':O o_O',
                'o_0',
                'o.O',
                '(o.o)',
                'oO',
                '（ ﾟ Дﾟ)',
                '(°◇°)',
                '（　ﾟДﾟ）'
            ],
            dissatisfied: [
                '(*￣m￣)'
            ],
            shrug: [
                'ヽ(´ー｀)┌',
                '¯\_(ツ)_/¯'
            ],
            infatuation: [
                '(*´▽｀*)',
                '(*°∀°)=3'
            ],
            snubbed: [
                '(´･ω･`)',
                '(‘A`)'
            ],
            kiss: [
                ':-*',
                ':*',
                ':×',
                '(*^3^)/~☆'
            ],
            wink: [
                ';‑)',
                ';)',
                '*-)',
                '*)',
                ';‑]',
                ';]',
                ';^)',
                ':‑,',
                ';D',
                '(^_-)',
                '(^_-)-☆'
            ],
            playful: [
                ':‑P',
                ':P',
                'X‑P',
                'XP',
                'x‑p',
                'xp',
                ':‑p',
                ':p',
                ':‑Þ',
                ':Þ',
                ':‑þ',
                ':þ',
                ':‑b',
                ':b',
                'd:',
                '=p',
                '>:P',
                '(`･ω･´)'
            ],
            skeptical: [
                ':‑/',
                ':/',
                ':‑.',
                '>:\\',
                '>:/',
                ':\\',
                ':\\',
                '=\\',
                ':L',
                ':L',
                ':S',
                '>.<',
                '((+_+))',
                '(+o+)',
                '(°°)',
                '(°-°)',
                '(°.°)',
                '(°_°)',
                '(°_°>)',
                '(°レ°)',
                '(・・?',
                '(?_?)'
            ],
            ultraman: [
                '(o|o)'
            ],
            high_five: [
                '^5',
                'o/\o',
                '>_>^ ^<_<'
            ],
            indecision: [
                ':‑|',
                ':|'
            ],
            indifferent: [
                '（　´_ゝ`）'
            ],
            embarassed: [
                ':$',
                '(－‸ლ)'
            ],
            tongue_tied: [
                ':‑X',
                ':‑#',
                ':‑&',
                ':X',
                ':#',
                ':&'
            ],
            angel: [
                'O:‑)',
                '0:‑3',
                '0:‑)',
                'O:)',
                '0:3',
                '0:)',
                '0;^)'
            ],
            evil: [
                '>:‑)',
                '>:)',
                '}:‑)',
                '}:)',
                '}:)',
                '3:)',
                '>;)'
            ],
            cool: [
                '|;‑)',
                '|‑O'
            ],
            toungue_in_cheek: [
                ':‑J'
            ],
            partied: [
                '#‑)'
            ],
            drunk: [
                '%‑)',
                '%)'
            ],
            sick: [
                ':‑###..',
                ':###..'
            ],
            dumb: [
                '<:‑|'
            ],
            troubled: [
                '(>_<)',
                '(>_<)>',
                '(^^ゞ',
                '(^_^;)',
                '(-_-;)',
                '(~_~;)',
                '(・.・;)',
                '(・_・;)',
                '(・・;) ^^;',
                '^_^;',
                '(#^.^#)',
                '(^',
                '^;)'
            ],
            baby: [
                '(\';\')'
            ],
            smoking: [
                '(^.^)y-.o○',
                '(-.-)y-°°°'
            ],
            sleeping: [
                '(-_-)zzz'
            ],
            headphones: [
                '((d[-_-]b))'
            ],
            study: [
                '.....φ(・∀・＊)'
            ],
            bubbles: [
                '.o○',
                '○o.'
            ],
            cup_of_tea: [
                '( ^^)',
                '_U~~',
                '_旦~~'
            ],
            star: [
                '☆彡',
                '☆ミ'
            ],
            carefree: [
                '（´∀｀）'
            ],
            other: [
                '<(｀^´)>',
                '!(^^)!',
                '(~o~)',
                '(~_~)',
                '(^^ゞ',
                '(p_-)',
                ':3ミ',
                '┐(\'～`；)┌'
            ]

        }
    }

    /**
     * @return {RegExp}
     */
    static get EMOTICON_PATTERN() {
        let emoticonList = [];
        for(let [category, emList] of Object.entries(Moji.EMOTICONS)) {
            emoticonList = [...emList, ...emoticonList];
        }
        return new RegExp(emoticonList.join('|'), 'g');
    }

    static get EMOJI_PATTERN() {
        /**
         * List of unicode blocks
         * @link https://en.wikipedia.org/wiki/Miscellaneous_Symbols_and_Pictographs
         * @link https://en.wikipedia.org/wiki/Supplemental_Symbols_and_Pictographs
         * @link https://en.wikipedia.org/wiki/Emoticons_(Unicode_block)
         * @link https://en.wikipedia.org/wiki/Transport_and_Map_Symbols
         * @link https://en.wikipedia.org/wiki/Miscellaneous_Symbols
         * @link https://en.wikipedia.org/wiki/Dingbat#Dingbats_Unicode_block
         * 
         * Unicode 10.0 represents emoji using 1,182 characters spread across 22 blocks,
         * of which 1,085 are single emoji characters, 26 are Regional Indicator Symbols 
         * that combine in pairs to form flag emoji, and 12 (#, * and 0-9) are base 
         * characters for keycap emoji sequences.
         * 
         * 637 of the 768 code points in the Miscellaneous Symbols and Pictographs
         * block are considered emoji. 134 of the 148 code points in the Supplemental 
         * Symbols and Pictographs block are considered emoji. All of the 80 code points
         * in the Emoticons block are considered emoji. 94 of the 107 code points in the 
         * Transport and Map Symbols block are considered emoji. 80 of the 256 code points 
         * in the Miscellaneous Symbols block are considered emoji. 33 of the 192 code 
         * points in the Dingbats block are considered emoji.
         */

        return /[\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{2934}-\u{1f18e}]/ug;
    }
    /**
     * Checks if the passed text item contains emoji
     * @param {String} emoticon 
     */
    static hasEmoji(textItem) {
        if (textItem && textItem.match(Moji.EMOJI_PATTERN)) {
            return true;
        } else {
            return false;
        }
    }

    /**
     * Checks if the passed text item contains emoticon
     * @param {String} emoticonText 
     */
    static hasEmoticon(emoticonText) {
        if (emoticonText && emoticonText.match(Moji.EMOTICON_PATTERN))
            return true;
        else
            return false;
    }

    /**
     * Replaces both emoji and emoticons by default
     * Returns the identical text if both emoji and emoticon
     * are false
     * @param {any} text
     * @param {Boolean} emoji - Replace all occuring emoji
     * @param {Boolean} emoticon - Replace all occuring emoticons
     */
    static replaceMoji(text, emoji = true, emoticon = true) {
        if (text) {
            if (emoji && emoticon) {
                text = text
                    .replace(Moji.EMOJI_PATTERN, "")
                    .replace(Moji.EMOTICON_PATTERN, "");
            } else if (emoji && !emoticon) {
                text = text
                    .replace(Moji.EMOJI_PATTERN, "");
            } else if (!emoji && emoticon) {
                text = text
                    .replace(Moji.EMOTICON_PATTERN, "");
            }

            return text;
        } else {
            return null;
        }
    }
}